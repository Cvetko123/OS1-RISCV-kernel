GAS LISTING /tmp/ccHKmQya.s 			page 1


   1              		.file	"workers.cpp"
   2              		.option pic
   3              		.option norelax
   4              		.text
   5              	.Ltext0:
   6              		.align	2
   7              		.globl	_Z9fibonaccim
   9              	_Z9fibonaccim:
  10              	.LFB27:
  11              		.file 1 "src/workers.cpp"
   1:src/workers.cpp **** //
   2:src/workers.cpp **** // Created by os on 9/24/25.
   3:src/workers.cpp **** //
   4:src/workers.cpp **** #include "../h/workers.hpp"
   5:src/workers.cpp **** #include "../lib/hw.h"
   6:src/workers.cpp **** #include "../h/TCB.hpp"
   7:src/workers.cpp **** #include "../h/print.hpp"
   8:src/workers.cpp **** #include "../h/syscall_c.hpp"
   9:src/workers.cpp **** 
  10:src/workers.cpp **** uint64 fibonacci(uint64 n) {
  12              		.loc 1 10 28
  13              		.cfi_startproc
  14              	.LVL0:
  15 0000 130101FE 		addi	sp,sp,-32
  16              		.cfi_def_cfa_offset 32
  17 0004 233C1100 		sd	ra,24(sp)
  18 0008 23388100 		sd	s0,16(sp)
  19 000c 23349100 		sd	s1,8(sp)
  20 0010 23302101 		sd	s2,0(sp)
  21              		.cfi_offset 1, -8
  22              		.cfi_offset 8, -16
  23              		.cfi_offset 9, -24
  24              		.cfi_offset 18, -32
  25 0014 13040102 		addi	s0,sp,32
  26              		.cfi_def_cfa 8, 0
  27 0018 93040500 		mv	s1,a0
  11:src/workers.cpp ****     if (n == 0 || n == 1) { return n; }
  28              		.loc 1 11 5
  29 001c 93071000 		li	a5,1
  30 0020 63F6A702 		bleu	a0,a5,.L1
  12:src/workers.cpp ****     if (n % 4 == 0) thread_dispatch();
  31              		.loc 1 12 5
  32              		.loc 1 12 11 is_stmt 0
  33 0024 93773500 		andi	a5,a0,3
  34              		.loc 1 12 5
  35 0028 638E0702 		beqz	a5,.L6
  36              	.LVL1:
  37              	.L3:
  13:src/workers.cpp ****     return fibonacci(n - 1) + fibonacci(n - 2);
  38              		.loc 1 13 5 is_stmt 1
  39              		.loc 1 13 21 is_stmt 0
  40 002c 1385F4FF 		addi	a0,s1,-1
  41 0030 97000000 		call	_Z9fibonaccim
  41      E7800000 
  42              	.LVL2:
  43 0038 13090500 		mv	s2,a0
  44              		.loc 1 13 40
GAS LISTING /tmp/ccHKmQya.s 			page 2


  45 003c 1385E4FF 		addi	a0,s1,-2
  46 0040 97000000 		call	_Z9fibonaccim
  46      E7800000 
  47              	.LVL3:
  48              		.loc 1 13 46
  49 0048 3305A900 		add	a0,s2,a0
  50              	.L1:
  14:src/workers.cpp **** }
  51              		.loc 1 14 1
  52 004c 83308101 		ld	ra,24(sp)
  53              		.cfi_remember_state
  54              		.cfi_restore 1
  55 0050 03340101 		ld	s0,16(sp)
  56              		.cfi_restore 8
  57              		.cfi_def_cfa 2, 32
  58 0054 83348100 		ld	s1,8(sp)
  59              		.cfi_restore 9
  60              	.LVL4:
  61 0058 03390100 		ld	s2,0(sp)
  62              		.cfi_restore 18
  63 005c 13010102 		addi	sp,sp,32
  64              		.cfi_def_cfa_offset 0
  65 0060 67800000 		jr	ra
  66              	.LVL5:
  67              	.L6:
  68              		.cfi_restore_state
  12:src/workers.cpp ****     if (n % 4 == 0) thread_dispatch();
  69              		.loc 1 12 21 is_stmt 1 discriminator 1
  12:src/workers.cpp ****     if (n % 4 == 0) thread_dispatch();
  70              		.loc 1 12 36 is_stmt 0 discriminator 1
  71 0064 97000000 		call	_Z15thread_dispatchv@plt
  71      E7800000 
  72              	.LVL6:
  73 006c 6FF01FFC 		j	.L3
  74              		.cfi_endproc
  75              	.LFE27:
  77              		.section	.rodata.str1.8,"aMS",@progbits,1
  78              		.align	3
  79              	.LC0:
  80 0000 41207374 		.string	"A started!\n"
  80      61727465 
  80      64210A00 
  81 000c 00000000 		.align	3
  82              	.LC1:
  83 0010 41206669 		.string	"A finished!\n"
  83      6E697368 
  83      6564210A 
  83      00
  84              		.text
  85              		.align	2
  86              		.globl	_Z11workerBodyAv
  88              	_Z11workerBodyAv:
  89              	.LFB28:
  15:src/workers.cpp **** 
  16:src/workers.cpp **** void workerBodyA() {
  90              		.loc 1 16 20 is_stmt 1
  91              		.cfi_startproc
GAS LISTING /tmp/ccHKmQya.s 			page 3


  92 0070 130101FF 		addi	sp,sp,-16
  93              		.cfi_def_cfa_offset 16
  94 0074 23341100 		sd	ra,8(sp)
  95 0078 23308100 		sd	s0,0(sp)
  96              		.cfi_offset 1, -8
  97              		.cfi_offset 8, -16
  98 007c 13040101 		addi	s0,sp,16
  99              		.cfi_def_cfa 8, 0
  17:src/workers.cpp ****     // uint8 i = 0;
  18:src/workers.cpp ****     // for (; i < 3; i++) { printString("A: i="); printInteger(i); printString("\n"); }
  19:src/workers.cpp ****     //
  20:src/workers.cpp ****     //
  21:src/workers.cpp ****     // printString("A: yield\n");
  22:src/workers.cpp ****     // __asm__ ("li t1, 7");
  23:src/workers.cpp ****     // thread_dispatch();
  24:src/workers.cpp ****     //
  25:src/workers.cpp ****     // uint64 t1 = 0;
  26:src/workers.cpp ****     // __asm__ ("mv %[t1], t1" : [t1] "=r"(t1));
  27:src/workers.cpp ****     // printString("A: t1="); printInteger(t1); printString("\n");
  28:src/workers.cpp ****     //
  29:src/workers.cpp ****     // uint64 result = fibonacci(20);
  30:src/workers.cpp ****     // printString("A: fibonaci="); printInteger(result); printString("\n");
  31:src/workers.cpp ****     //
  32:src/workers.cpp ****     // for (; i < 6; i++) { printString("A: i="); printInteger(i); printString("\n"); }
  33:src/workers.cpp ****     //
  34:src/workers.cpp ****     // thread_dispatch();
  35:src/workers.cpp ****     printString("A started!\n");
 100              		.loc 1 35 5
 101              		.loc 1 35 16 is_stmt 0
 102 0080 17050000 		lla	a0,.LC0
 102      13050500 
 103 0088 97000000 		call	_Z11printStringPKc@plt
 103      E7800000 
 104              	.LVL7:
  36:src/workers.cpp ****     thread_dispatch();
 105              		.loc 1 36 5 is_stmt 1
 106              		.loc 1 36 20 is_stmt 0
 107 0090 97000000 		call	_Z15thread_dispatchv@plt
 107      E7800000 
 108              	.LVL8:
  37:src/workers.cpp ****     printString("A finished!\n");
 109              		.loc 1 37 5 is_stmt 1
 110              		.loc 1 37 16 is_stmt 0
 111 0098 17050000 		lla	a0,.LC1
 111      13050500 
 112 00a0 97000000 		call	_Z11printStringPKc@plt
 112      E7800000 
 113              	.LVL9:
  38:src/workers.cpp **** }
 114              		.loc 1 38 1
 115 00a8 83308100 		ld	ra,8(sp)
 116              		.cfi_restore 1
 117 00ac 03340100 		ld	s0,0(sp)
 118              		.cfi_restore 8
 119              		.cfi_def_cfa 2, 16
 120 00b0 13010101 		addi	sp,sp,16
 121              		.cfi_def_cfa_offset 0
GAS LISTING /tmp/ccHKmQya.s 			page 4


 122 00b4 67800000 		jr	ra
 123              		.cfi_endproc
 124              	.LFE28:
 126              		.section	.rodata.str1.8
 127 001d 000000   		.align	3
 128              	.LC2:
 129 0020 42207374 		.string	"B started!\n"
 129      61727465 
 129      64210A00 
 130 002c 00000000 		.align	3
 131              	.LC3:
 132 0030 42206669 		.string	"B finished!\n"
 132      6E697368 
 132      6564210A 
 132      00
 133              		.text
 134              		.align	2
 135              		.globl	_Z11workerBodyBv
 137              	_Z11workerBodyBv:
 138              	.LFB29:
  39:src/workers.cpp **** 
  40:src/workers.cpp **** void workerBodyB() {
 139              		.loc 1 40 20 is_stmt 1
 140              		.cfi_startproc
 141 00b8 130101FF 		addi	sp,sp,-16
 142              		.cfi_def_cfa_offset 16
 143 00bc 23341100 		sd	ra,8(sp)
 144 00c0 23308100 		sd	s0,0(sp)
 145              		.cfi_offset 1, -8
 146              		.cfi_offset 8, -16
 147 00c4 13040101 		addi	s0,sp,16
 148              		.cfi_def_cfa 8, 0
  41:src/workers.cpp ****     // uint8 i = 10;
  42:src/workers.cpp ****     // for (; i < 13; i++) { printString("B: i="); printInteger(i); printString("\n"); }
  43:src/workers.cpp ****     //
  44:src/workers.cpp ****     // printString("B: yield\n");
  45:src/workers.cpp ****     // __asm__ ("li t1, 5");
  46:src/workers.cpp ****     // thread_dispatch();
  47:src/workers.cpp ****     //
  48:src/workers.cpp ****     // uint64 result = fibonacci(23);
  49:src/workers.cpp ****     // printString("B: fibonaci="); printInteger(result); printString("\n");
  50:src/workers.cpp ****     //
  51:src/workers.cpp ****     // for (; i < 16; i++) { printString("B: i="); printInteger(i); printString("\n"); }
  52:src/workers.cpp ****     // thread_dispatch();
  53:src/workers.cpp **** 
  54:src/workers.cpp ****     printString("B started!\n");
 149              		.loc 1 54 5
 150              		.loc 1 54 16 is_stmt 0
 151 00c8 17050000 		lla	a0,.LC2
 151      13050500 
 152 00d0 97000000 		call	_Z11printStringPKc@plt
 152      E7800000 
 153              	.LVL10:
  55:src/workers.cpp ****     thread_dispatch();
 154              		.loc 1 55 5 is_stmt 1
 155              		.loc 1 55 20 is_stmt 0
 156 00d8 97000000 		call	_Z15thread_dispatchv@plt
GAS LISTING /tmp/ccHKmQya.s 			page 5


 156      E7800000 
 157              	.LVL11:
  56:src/workers.cpp ****     printString("B finished!\n");
 158              		.loc 1 56 5 is_stmt 1
 159              		.loc 1 56 16 is_stmt 0
 160 00e0 17050000 		lla	a0,.LC3
 160      13050500 
 161 00e8 97000000 		call	_Z11printStringPKc@plt
 161      E7800000 
 162              	.LVL12:
  57:src/workers.cpp **** }
 163              		.loc 1 57 1
 164 00f0 83308100 		ld	ra,8(sp)
 165              		.cfi_restore 1
 166 00f4 03340100 		ld	s0,0(sp)
 167              		.cfi_restore 8
 168              		.cfi_def_cfa 2, 16
 169 00f8 13010101 		addi	sp,sp,16
 170              		.cfi_def_cfa_offset 0
 171 00fc 67800000 		jr	ra
 172              		.cfi_endproc
 173              	.LFE29:
 175              	.Letext0:
 176              		.file 2 "src/../h/../lib/hw.h"
 177              		.file 3 "src/../h/print.hpp"
 178              		.file 4 "src/../h/syscall_c.hpp"
GAS LISTING /tmp/ccHKmQya.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 workers.cpp
     /tmp/ccHKmQya.s:9      .text:0000000000000000 _Z9fibonaccim
     /tmp/ccHKmQya.s:13     .text:0000000000000000 .L0 
     /tmp/ccHKmQya.s:15     .text:0000000000000000 .L0 
     /tmp/ccHKmQya.s:16     .text:0000000000000004 .L0 
     /tmp/ccHKmQya.s:21     .text:0000000000000014 .L0 
     /tmp/ccHKmQya.s:22     .text:0000000000000014 .L0 
     /tmp/ccHKmQya.s:23     .text:0000000000000014 .L0 
     /tmp/ccHKmQya.s:24     .text:0000000000000014 .L0 
     /tmp/ccHKmQya.s:26     .text:0000000000000018 .L0 
     /tmp/ccHKmQya.s:29     .text:000000000000001c .L0 
     /tmp/ccHKmQya.s:32     .text:0000000000000024 .L0 
     /tmp/ccHKmQya.s:33     .text:0000000000000024 .L0 
     /tmp/ccHKmQya.s:35     .text:0000000000000028 .L0 
     /tmp/ccHKmQya.s:39     .text:000000000000002c .L0 
     /tmp/ccHKmQya.s:40     .text:000000000000002c .L0 
     /tmp/ccHKmQya.s:45     .text:000000000000003c .L0 
     /tmp/ccHKmQya.s:49     .text:0000000000000048 .L0 
     /tmp/ccHKmQya.s:52     .text:000000000000004c .L0 
     /tmp/ccHKmQya.s:53     .text:0000000000000050 .L0 
     /tmp/ccHKmQya.s:54     .text:0000000000000050 .L0 
     /tmp/ccHKmQya.s:56     .text:0000000000000054 .L0 
     /tmp/ccHKmQya.s:57     .text:0000000000000054 .L0 
     /tmp/ccHKmQya.s:59     .text:0000000000000058 .L0 
     /tmp/ccHKmQya.s:62     .text:000000000000005c .L0 
     /tmp/ccHKmQya.s:64     .text:0000000000000060 .L0 
     /tmp/ccHKmQya.s:68     .text:0000000000000064 .L0 
     /tmp/ccHKmQya.s:70     .text:0000000000000064 .L0 
     /tmp/ccHKmQya.s:71     .text:0000000000000064 .L0 
     /tmp/ccHKmQya.s:74     .text:0000000000000070 .L0 
     /tmp/ccHKmQya.s:88     .text:0000000000000070 _Z11workerBodyAv
     /tmp/ccHKmQya.s:91     .text:0000000000000070 .L0 
     /tmp/ccHKmQya.s:92     .text:0000000000000070 .L0 
     /tmp/ccHKmQya.s:93     .text:0000000000000074 .L0 
     /tmp/ccHKmQya.s:96     .text:000000000000007c .L0 
     /tmp/ccHKmQya.s:97     .text:000000000000007c .L0 
     /tmp/ccHKmQya.s:99     .text:0000000000000080 .L0 
     /tmp/ccHKmQya.s:101    .text:0000000000000080 .L0 
     /tmp/ccHKmQya.s:102    .text:0000000000000080 .L0 
     /tmp/ccHKmQya.s:106    .text:0000000000000090 .L0 
     /tmp/ccHKmQya.s:107    .text:0000000000000090 .L0 
     /tmp/ccHKmQya.s:110    .text:0000000000000098 .L0 
     /tmp/ccHKmQya.s:111    .text:0000000000000098 .L0 
     /tmp/ccHKmQya.s:115    .text:00000000000000a8 .L0 
     /tmp/ccHKmQya.s:116    .text:00000000000000ac .L0 
     /tmp/ccHKmQya.s:118    .text:00000000000000b0 .L0 
     /tmp/ccHKmQya.s:119    .text:00000000000000b0 .L0 
     /tmp/ccHKmQya.s:121    .text:00000000000000b4 .L0 
     /tmp/ccHKmQya.s:123    .text:00000000000000b8 .L0 
     /tmp/ccHKmQya.s:137    .text:00000000000000b8 _Z11workerBodyBv
     /tmp/ccHKmQya.s:140    .text:00000000000000b8 .L0 
     /tmp/ccHKmQya.s:141    .text:00000000000000b8 .L0 
     /tmp/ccHKmQya.s:142    .text:00000000000000bc .L0 
     /tmp/ccHKmQya.s:145    .text:00000000000000c4 .L0 
     /tmp/ccHKmQya.s:146    .text:00000000000000c4 .L0 
     /tmp/ccHKmQya.s:148    .text:00000000000000c8 .L0 
GAS LISTING /tmp/ccHKmQya.s 			page 7


     /tmp/ccHKmQya.s:150    .text:00000000000000c8 .L0 
     /tmp/ccHKmQya.s:151    .text:00000000000000c8 .L0 
     /tmp/ccHKmQya.s:155    .text:00000000000000d8 .L0 
     /tmp/ccHKmQya.s:156    .text:00000000000000d8 .L0 
     /tmp/ccHKmQya.s:159    .text:00000000000000e0 .L0 
     /tmp/ccHKmQya.s:160    .text:00000000000000e0 .L0 
     /tmp/ccHKmQya.s:164    .text:00000000000000f0 .L0 
     /tmp/ccHKmQya.s:165    .text:00000000000000f4 .L0 
     /tmp/ccHKmQya.s:167    .text:00000000000000f8 .L0 
     /tmp/ccHKmQya.s:168    .text:00000000000000f8 .L0 
     /tmp/ccHKmQya.s:170    .text:00000000000000fc .L0 
     /tmp/ccHKmQya.s:172    .text:0000000000000100 .L0 
     /tmp/ccHKmQya.s:179    .text:0000000000000100 .L0 
     /tmp/ccHKmQya.s:79     .rodata.str1.8:0000000000000000 .LC0
     /tmp/ccHKmQya.s:102    .text:0000000000000080 .L0 
     /tmp/ccHKmQya.s:82     .rodata.str1.8:0000000000000010 .LC1
     /tmp/ccHKmQya.s:111    .text:0000000000000098 .L0 
     /tmp/ccHKmQya.s:128    .rodata.str1.8:0000000000000020 .LC2
     /tmp/ccHKmQya.s:151    .text:00000000000000c8 .L0 
     /tmp/ccHKmQya.s:131    .rodata.str1.8:0000000000000030 .LC3
     /tmp/ccHKmQya.s:160    .text:00000000000000e0 .L0 
     /tmp/ccHKmQya.s:50     .text:000000000000004c .L1
     /tmp/ccHKmQya.s:67     .text:0000000000000064 .L6
     /tmp/ccHKmQya.s:37     .text:000000000000002c .L3
     /tmp/ccHKmQya.s:440    .debug_abbrev:0000000000000000 .Ldebug_abbrev0
     /tmp/ccHKmQya.s:791    .debug_str:0000000000000195 .LASF26
     /tmp/ccHKmQya.s:755    .debug_str:000000000000005c .LASF27
     /tmp/ccHKmQya.s:773    .debug_str:00000000000000db .LASF28
     /tmp/ccHKmQya.s:5      .text:0000000000000000 .Ltext0
     /tmp/ccHKmQya.s:175    .text:0000000000000100 .Letext0
     /tmp/ccHKmQya.s:739    .debug_line:0000000000000000 .Ldebug_line0
     /tmp/ccHKmQya.s:777    .debug_str:000000000000011a .LASF0
     /tmp/ccHKmQya.s:779    .debug_str:0000000000000127 .LASF1
     /tmp/ccHKmQya.s:771    .debug_str:00000000000000cd .LASF2
     /tmp/ccHKmQya.s:767    .debug_str:00000000000000ba .LASF4
     /tmp/ccHKmQya.s:787    .debug_str:0000000000000172 .LASF3
     /tmp/ccHKmQya.s:749    .debug_str:0000000000000039 .LASF5
     /tmp/ccHKmQya.s:781    .debug_str:000000000000013a .LASF6
     /tmp/ccHKmQya.s:775    .debug_str:0000000000000107 .LASF7
     /tmp/ccHKmQya.s:797    .debug_str:0000000000000276 .LASF8
     /tmp/ccHKmQya.s:765    .debug_str:00000000000000ac .LASF9
     /tmp/ccHKmQya.s:783    .debug_str:000000000000014d .LASF10
     /tmp/ccHKmQya.s:793    .debug_str:0000000000000259 .LASF11
     /tmp/ccHKmQya.s:751    .debug_str:0000000000000040 .LASF12
     /tmp/ccHKmQya.s:745    .debug_str:0000000000000018 .LASF13
     /tmp/ccHKmQya.s:753    .debug_str:0000000000000050 .LASF14
     /tmp/ccHKmQya.s:785    .debug_str:000000000000015c .LASF15
     /tmp/ccHKmQya.s:759    .debug_str:000000000000007c .LASF16
     /tmp/ccHKmQya.s:761    .debug_str:0000000000000092 .LASF17
     /tmp/ccHKmQya.s:743    .debug_str:000000000000000c .LASF18
     /tmp/ccHKmQya.s:747    .debug_str:0000000000000028 .LASF20
     /tmp/ccHKmQya.s:138    .text:00000000000000b8 .LFB29
     /tmp/ccHKmQya.s:173    .text:0000000000000100 .LFE29
     /tmp/ccHKmQya.s:153    .text:00000000000000d8 .LVL10
     /tmp/ccHKmQya.s:157    .text:00000000000000e0 .LVL11
     /tmp/ccHKmQya.s:162    .text:00000000000000f0 .LVL12
     /tmp/ccHKmQya.s:741    .debug_str:0000000000000000 .LASF19
GAS LISTING /tmp/ccHKmQya.s 			page 8


     /tmp/ccHKmQya.s:789    .debug_str:0000000000000184 .LASF21
     /tmp/ccHKmQya.s:89     .text:0000000000000070 .LFB28
     /tmp/ccHKmQya.s:124    .text:00000000000000b8 .LFE28
     /tmp/ccHKmQya.s:104    .text:0000000000000090 .LVL7
     /tmp/ccHKmQya.s:108    .text:0000000000000098 .LVL8
     /tmp/ccHKmQya.s:113    .text:00000000000000a8 .LVL9
     /tmp/ccHKmQya.s:799    .debug_str:0000000000000286 .LASF29
     /tmp/ccHKmQya.s:795    .debug_str:0000000000000268 .LASF30
     /tmp/ccHKmQya.s:10     .text:0000000000000000 .LFB27
     /tmp/ccHKmQya.s:75     .text:0000000000000070 .LFE27
     /tmp/ccHKmQya.s:704    .debug_loc:0000000000000000 .LLST0
     /tmp/ccHKmQya.s:42     .text:0000000000000038 .LVL2
     /tmp/ccHKmQya.s:47     .text:0000000000000048 .LVL3
     /tmp/ccHKmQya.s:72     .text:000000000000006c .LVL6
     /tmp/ccHKmQya.s:801    .debug_str:0000000000000290 .LASF22
     /tmp/ccHKmQya.s:769    .debug_str:00000000000000c1 .LASF24
     /tmp/ccHKmQya.s:763    .debug_str:0000000000000097 .LASF23
     /tmp/ccHKmQya.s:757    .debug_str:000000000000006c .LASF25
     /tmp/ccHKmQya.s:14     .text:0000000000000000 .LVL0
     /tmp/ccHKmQya.s:36     .text:000000000000002c .LVL1
     /tmp/ccHKmQya.s:60     .text:0000000000000058 .LVL4
     /tmp/ccHKmQya.s:66     .text:0000000000000064 .LVL5
     /tmp/ccHKmQya.s:180    .debug_info:0000000000000000 .Ldebug_info0

UNDEFINED SYMBOLS
_Z15thread_dispatchv
_Z11printStringPKc
